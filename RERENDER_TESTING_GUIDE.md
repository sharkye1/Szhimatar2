# Чек-лист для проверки кнопок переповтора

## Что вы должны увидеть теперь

Когда вы откроете раздел **Statistics**, в каждом элементе истории вы должны увидеть:

```
[completed]  R1  R2  ×
[error]           ×
[stopped]         ×
```

Где:
- **[status]** - статус рендера (должен быть виден для всех элементов)
- **R1** - кнопка "Перезаписать" (видна ТОЛЬКО для `[completed]`)
- **R2** - кнопка "Новая версия" (видна ТОЛЬКО для `[completed]`)
- **×** - кнопка удаления (видна всегда)

## Пошаговая проверка

### Шаг 1: Проверьте консоль браузера
1. Нажмите **F12** или **Ctrl+Shift+I** для открытия DevTools
2. Перейдите на вкладку **Console**
3. Откройте раздел **Statistics** в приложении
4. В консоли должны появиться логи:
   ```
   [StatisticsPanel] Loaded. Total renders: X Filtered renders: Y Filter: all
   [StatisticsPanel] Renders by status: [...]
   ```
5. Если:
   - `Total renders: 0` → История вообще пуста, нет данных
   - `Total renders: 5, Filtered renders: 0` → Фильтр установлен неправильно
   - `Total renders: 5, Filtered renders: 5` → История загружена, должны быть видны элементы

### Шаг 2: Проверьте видимость статусов
- Посмотрите на левую часть каждого элемента истории
- Вы должны увидеть `[completed]`, `[error]`, `[stopped]` и т.д.
- Если статусы НЕ видны → проблема в history-actions CSS или JSX структуре

### Шаг 3: Проверьте видимость кнопок
- Для элементов со статусом `[completed]` должны быть видны кнопки **R1** и **R2**
- Для других статусов должна быть видна только кнопка **×**
- Если кнопки не видны:

#### Проблема 1: Нет completed рендеров в истории
**Решение**: 
- Сделайте тестовый рендер (например, возьмите видео, рендерьте в течение 5 секунд, потом остановите)
- Или используйте фильтр "all" чтобы увидеть все рендеры независимо от статуса

#### Проблема 2: Кнопки скрыты из-за переполнения (overflow)
**Проверка**: В DevTools (F12) → Inspect Element → найдите `.history-actions`
- Посмотрите есть ли `overflow: hidden` на родительском элементе
- Проверьте есть ли `max-width` ограничение

#### Проблема 3: Кнопки есть но невидимы (color/opacity проблема)
**Проверка**: В DevTools посмотрите вычисленные стили кнопки
- `color` должен быть не белым на белом фоне
- `opacity` должен быть >= 0.5
- `display` должен быть `inline-flex` или похожее

### Шаг 4: Проверьте функциональность
Когда убедитесь, что кнопки видны:
1. Кликните на кнопку **R1** (Перезаписать)
2. В консоли должно появиться:
   ```
   [StatisticsPanel] Re-render queued (overwrite): /path/to/video.mp4
   ```
3. Видео должно появиться в очереди рендеров
4. Повторите с кнопкой **R2** - должно быть:
   ```
   [StatisticsPanel] Re-render queued (new version): /path/to/video.mp4 → /path/to/video_2.mp4
   ```

## Если кнопки НЕ появились вообще

### Вариант 1: Проверьте, что история загружена
```javascript
// В консоли браузера (F12 → Console) напишите:
JSON.parse(localStorage.getItem('szhimatar_stats')).renders.length
```
- Если результат = 0 → истории нет, нужен тестовый рендер
- Если результат > 0 → история есть

### Вариант 2: Проверьте CSS файл
1. Откройте `src/styles/StatisticsPanel.css`
2. Найдите `.history-actions`
3. Убедитесь что там есть:
   ```css
   .history-actions {
       display: flex;
       gap: 4px;
       margin-left: 12px;
       flex-shrink: 0;
   }
   ```
4. Если блока нет → добавьте его

### Вариант 3: Проверьте JSX структуру
1. Откройте `src/components/StatisticsPanel.tsx`
2. Найдите `<div className="history-actions">`
3. Убедитесь что структура:
   ```tsx
   <div className="history-actions">
     <span>[{render.status}]</span>
     {render.status === 'completed' && (
       <>
         <button>R1</button>
         <button>R2</button>
       </>
     )}
     <button>×</button>
   </div>
   ```

## Финальная проверка

Если все работает правильно:
1. ✅ Видны статусы `[completed]`, `[error]` и т.д.
2. ✅ Для `[completed]` видны кнопки **R1** и **R2**
3. ✅ Клик на кнопки добавляет рендер в очередь
4. ✅ Появляются логи в консоли браузера

Если что-то не работает → проверьте консоль браузера (F12) на наличие JavaScript ошибок!
